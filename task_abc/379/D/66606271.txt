#include <bits/stdc++.h>

using namespace std;

long long q, cnt, res, tot;

vector <int> v, d;

int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0);
    cin >> q;
    int pos = 0;
    for (int i = 1; i <= q; i++) {
        int t;
        cin >> t;
        if (t == 1) {
            cnt++;
        }
        if (t == 2) {
            int x;
            cin >> x;
            res += x;
            tot++;
            v.push_back(cnt);
            d.push_back(x);
            cnt = 0;
        }
        if (t == 3) {
            int x, ans = 0;
            cin >> x;
            while (res >= x) {
                ans += v[pos];
                res -= d[pos];
                pos++;
            }
            cout << ans << '\n';
        }
    }
}
/**
6
1
2 15
1
3 10
2 20
3 20

(15, 1)

*/

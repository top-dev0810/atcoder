#include<bits/stdc++.h>
using namespace std;
long long q,x,y,a[200005],t,k,z,f = 1;
int main(){
	cin >> q;
	while(q--){
		cin >> x;
		if (x == 1) a[++t] = (-k);
		else if (x == 2){
			cin >> y;
			k += y;
		}else {
			cin >> z;
			long long l = f,r = t;
			while (l <= r){
				long long mid = (l + r) / 2;
				if (k + a[mid] >= z) l = mid + 1;
				else r = mid - 1;
			}
			cout << l - f << endl;
			f = l;
		}
	}
	return 0;
}
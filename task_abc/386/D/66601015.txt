#include<bits/stdc++.h>
using namespace std;
using LL = __int128;
typedef long long ll;
const int N = 1e6+7;
int main() {
	int N, M;
	cin >> N >> M;
	vector<tuple<int,int,string>> xyc;
	for (int i = 0; i < M; i++) {
		int x, y;
		string c;
		cin >> x >> y >> c;
		xyc.push_back({x, y, c});
	}
	sort(xyc.begin(), xyc.end());
	ll min_y = 1e9+7;
	string ans = "Yes";
	for (int i=0;i<M;i++) {
		int y = get<1>(xyc[i]);
		string c = get<2>(xyc[i]);
		if (c == "W") {
			if (y < min_y) {
				min_y = y;
			}
		} else if (c == "B") {
			if (y >= min_y) {
				ans = "No";
			}
		}
	}
	cout << ans << endl;
	return 0;
}
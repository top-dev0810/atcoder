#include <bits/stdc++.h>
using namespace std;
typedef long long ll ;
ll mod = 998244353 ;

ll qpow(ll a , ll b){
    ll res = 1 ;
    while(b){
        if(b & 1)
            res = res * a % mod ;
        a = a * a % mod ;
        b >>= 1LL ;
    }
    return res ;
}

int main(){
    ios::sync_with_stdio(0) ;
    cin.tie(0) ;

    int n ; cin >> n ;
    vector < vector<int> > a(n+10 , vector<int>(7)) ;
    vector < pair<int,int> > v ;
    vector <int> p(n+10) ;
    ll base = qpow( qpow(6 , n) % mod , mod-2) % mod , cnt = 0 ;

    for(int i = 1 ; i <= n ; i ++){
        for(int j = 1 ; j <= 6 ; j ++){
            cin >> a[i][j] ;
            v.emplace_back(a[i][j],i) ;
        }
    }
    sort(v.begin() , v.end()) ;
    
    ll tot = 1 , ans = 0 , pre = 0 ;
    for(int i = 0 ; i < v.size() ; i ++){
        int j = i ;
        while(j < v.size() && v[i].first == v[j].first){
            int id = v[j].second ;
            if(p[id] != 0) tot = tot * qpow(p[id] , mod-2) % mod ;
            if(p[id] == 0) cnt ++ ;
            p[id] ++ ;
            tot = tot * p[id] % mod ;
            j ++ ;
        }
        if(cnt == n){
            ll res = (tot - pre + mod) % mod ;
            ans = (ans + res * v[i].first % mod * base % mod) % mod ;
            pre = tot ;
        }
        i = j-1 ;
    }
    cout << ans << '\n' ;
    return 0 ;
}
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    int T;  cin >> T;
    while (T--) {
        int N; cin >> N;
        vector<int> P(N+1);
        for (int i = 1; i <= N; ++i) cin >> P[i];

        /* 0 手判定 */
        bool sorted = true;
        for (int i = 1; i <= N; ++i) if (P[i] != i) { sorted = false; break; }
        if (sorted) { cout << 0 << '\n'; continue; }

        /* prefix max / suffix min */
        vector<int> pref_max(N+2, 0), suf_min(N+2, N+1);
        for (int i = 1; i <= N; ++i) pref_max[i] = max(pref_max[i-1], P[i]);
        for (int i = N; i >= 1; --i) suf_min[i]  = min(suf_min[i+1],  P[i]);

        /* 1 手判定 */
        bool one = false;
        for (int i = 1; i <= N; ++i) {
            if (P[i] == i &&
                pref_max[i-1] < i &&
                suf_min[i+1]  > i) {
                one = true; break;
            }
        }
        if (one) { cout << 1 << '\n'; continue; }

        /* 3 手判定 (先頭=N, 末尾=1) */
        if (P[1] == N && P[N] == 1) {
            cout << 3 << '\n';
        } else {
            cout << 2 << '\n';
        }
    }
    return 0;
}

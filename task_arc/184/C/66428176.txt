#include<bits/stdc++.h>
using namespace std;

#define int ll
typedef long long ll;
typedef unsigned long long ull;

#define mk make_pair
#define fi first
#define se second
typedef pair<int,int> pii;
typedef pair<double,double> pdd;

#define ReadIn(s) freopen(s,"r",stdin)
#define OutPut(s) freopen(s,"w",stdout)

#define btpcll(x) __builtin_popcountll(x)
#define btpc(x) __builtin_popcount(x)

#define eb emplace_back
#define sz(x) (int)(x.size())

template<typename T>
void read(T &x){
	x=0;char c=getchar();T neg=0;
	while(!isdigit(c)) neg|=!(c^'-'),c=getchar();
	while(isdigit(c)) x=(x<<3)+(x<<1)+(c^48),c=getchar();
	if(neg) x=(~x)+1;
}
template<typename T,typename ...Args>
void read(T &x,Args &...args) {
	read(x);read(args...);
}

const int M=3e5+10;
const int inf=0x3f3f3f3f3f3f3f3f;
const double eps=1e-10;

inline int comp (double x,double y) {
	if(x-y>eps) return 1;
	if(y-x>eps) return -1;
	return 0;
}

bool Mst;
//in this

int n;
int a[M];
int b[M];

pii get(int dep,int l,int r) {
	if(l>r) return mk(0,0);
	if(!dep) return mk(-inf,r-l+1);
	
	int cnt[4]={};
	
	int lp=l-1,rp=r+1;
	for(int i=l;i<=r;i++) {
		if(a[i]&1) b[++lp]=a[i];
		else b[--rp]=a[i];
		cnt[a[i]&3]++;
	}
	
	for(int i=l;i<=r;i++) a[i]=b[i]>>1;
	
	auto _1=get(dep-1,l,lp);
	auto _0=get(dep-1,rp,r);
	
	return mk(max(_1.fi+cnt[2],_1.se+cnt[0]),max(_0.fi+cnt[1],_0.se+cnt[3]));
	
}

void solve() {
	read(n);
	for(int i=1;i<=n;i++) read(a[i]);
	
	auto res=get(110,1,n);
	
	cout<<max(res.fi,res.se);
	
}

//
bool Med;

signed main() {
	
	solve();
	
	cerr<<"\n";
	cerr<<"Memory:"<<(&Mst-&Med)/1024.0/1024<<" MB\n";
	cerr<<"Time:"<<clock()/1.0/CLOCKS_PER_SEC*1000.0<<" ms\n";

	return 0;
}

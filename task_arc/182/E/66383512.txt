#include<bits/stdc++.h>
using namespace std;

#define int ll
typedef long long ll;
typedef unsigned long long ull;

#define mk make_pair
#define fi first
#define se second
typedef pair<int,int> pii;
typedef pair<double,double> pdd;

#define ReadIn(s) freopen(s,"r",stdin)
#define OutPut(s) freopen(s,"w",stdout)

#define btpcll(x) __builtin_popcountll(x)
#define btpc(x) __builtin_popcount(x)

#define eb emplace_back
#define sz(x) (int)(x.size())

template<typename T>
void read(T &x){
	x=0;char c=getchar();T neg=0;
	while(!isdigit(c)) neg|=!(c^'-'),c=getchar();
	while(isdigit(c)) x=(x<<3)+(x<<1)+(c^48),c=getchar();
	if(neg) x=(~x)+1;
}
template<typename T,typename ...Args>
void read(T &x,Args &...args) {
	read(x);read(args...);
}

const int M=3e5+10;
const int inf=0x3f3f3f3f3f3f3f3f;
const double eps=1e-10;
const int p=998244353;

inline int comp (double x,double y) {
	if(x-y>eps) return 1;
	if(y-x>eps) return -1;
	return 0;
}

bool Mst;
//in this

int n,m,c,k;
int a[M];

int f(int a,int b,int c,int n) {
	if(!a) return (n+1)*(b/c);
	if(!n) return b/c;
	if(a>=c||b>=c) return n*(n+1)/2*(a/c)+(n+1)*(b/c)+f(a%c,b%c,c,n);
	int m=(a*n+b)/c;
	return n*m-f(c,c-b-1,a,m-1);
}

void solve() {
	read(n,m,c,k);
	
	for(int i=1;i<=n;i++) read(a[i]);
	
	int ans=0;
	
	sort(a+1,a+n+1); 
	
	ans+=k*a[1]+k*(k-1)/2*c;
	
//	cout<<ans<<"\n";
	
	ans-=f(c,a[1],m,k-1)*m;
	
	for(int i=2;i<=n;i++) {
		ans+=(a[i]-a[1]-m)*(f(c,a[i],m,k-1)-f(c,a[i-1],m,k-1));
	}
	
	cout<<ans;
}

//
bool Med;

signed main() {
	
	solve();
	
	cerr<<"\n";
	cerr<<"Memory:"<<(&Mst-&Med)/1024.0/1024<<" MB\n";
	cerr<<"Time:"<<clock()/1.0/CLOCKS_PER_SEC*1000.0<<" ms\n";

	return 0;
}

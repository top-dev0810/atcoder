#include <bits/stdc++.h>
using namespace std;

void solve(){
  long long H,W; cin >> H >> W;
  string S; cin >> S;
  int N=(int)(S.size());
  int rd=H-1, rr=W-1;
  for(int i=0;i<N;i++){
    if(S[i]=='D') rd--;
    if(S[i]=='R') rr--;
  }
  string DL=S, UR=S;
  for(int i=0;i<N;i++){
    if(S[i]=='?'){
      if(rd>0){
        DL[i]='D';
        rd--;
      }
      else DL[i]='R';
    }
  }
  for(int i=0;i<N;i++){
    if(S[i]=='?'){
      if(rr>0){
        UR[i]='R';
        rr--;
      }
      else UR[i]='D';
    }
  }
  vector<int> u,d;
  int tmp=1;
  for(int i=0;i<N;i++){
    if(UR[i]=='D') u.push_back(tmp);
    else tmp++;
  }
  u.push_back(tmp);
  tmp=W;
  reverse(DL.begin(),DL.end());
  for(int i=0;i<N;i++){
    if(DL[i]=='D') d.push_back(tmp);
    else tmp--;
  }
  d.push_back(tmp);
  reverse(d.begin(),d.end());
  long long ans=0LL;
  for(int i=0;i<H;i++){
    ans+=u[i]-d[i]+1;
  }
  printf("%lld\n",ans);
  return;
}
int main(){
  int T; cin >> T;
  while(T--){
    solve();
  }
  return 0;
}  